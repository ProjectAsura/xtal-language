
inherit(lib::test);

class FibTest{
	fib: fun(i){
		if(i<2){
			return 1;
		}
		else{
			return callee(i-2) + callee(i-1);
		}
	}

	fib2: fun fiber{
	  i: 1; 
	  j: 1;
	  while(true){
	    yield i;
	    i, j = j, i + j;
	  }
	}
	
	fib6#Test{
		fib3: fib2();
		10.times{
			assert fib(it)==fib3(it)
		}
	}

	fib_zip#Test{
		zip(fib2(), 10.times){ |v, i|
			assert fib(i) == v;
		}
	}
}

