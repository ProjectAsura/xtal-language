=擬似変数=

==null==
何も無いことを表すオブジェクトです。唯一「偽」となるオブジェクトです。

nullはシングルトンオブジェクトです。

==true==
「真」を表すオブジェクトです。

ただし、null以外の全てのオブジェクトは「真」なので、他に適当な値が無い場合にこれを使ってください。

==false==
「偽」を表すオブジェクトです。これはnullと同一です。

==nop==
ほとんどのメソッド呼び出しに対し、nop自身を返す以外の反応が無い、とても無気力なオブジェクトです。===演算子でnopと等しいかチェックをすることは出来ます。

nopはシングルトンオブジェクトです。

==callee==
calleeという擬似変数は、今実行している関数自身を指してます。
よって
{{{
 callee();
}}}
と記述すると、再帰呼び出しとなります。 

==lib==
ライブラリのロード、登録を司るオブジェクトです。
lib::foo とすると、foo.xtalファイルを検索し、コンパイル、実行して、そのファイルでexportされた値を保存します。

二度目以降のアクセスはその保存された値が返されます。

{{{
// foo.xtalを読み込み、exportされた値をfoo変数を定義
foo: lib::foo; 

// 既にfoo.xtalは読み込まれているので、保存された値でhoge変数を定義する。
hoge: lib::foo; 
}}}

上のようなファイル読み込み以外にも、libオブジェクトにメンバを直接定義することも可能です。
{{{
// libにmy_classを定義する
lib::my_class: class{
  foo: fun(){
    "foo!".p;
  }
}

lib::my_class::foo(); //=> foo!
}}}

==toplevel==
そのファイル固有ののトップレベルを指す名前空間的に扱われるクラスです。
静的に見つからない変数参照は、toplevelから検索されます。
{{{
println(foo); // toplevel::println(toplevel::foo); と同義
}}}

他のクラスをtoplevelオブジェクトにinheritすることで、暗黙的に検索される関数を追加できます。
{{{
Foo: class{
  hoge: fun(){
    "hoge!".p;
  }
}
toplevel.inherit(Foo);
hoge(); //=> hoge!
}}}
また、toplevelはbuiltinオブジェクトをinheritしているので、builtinに定義されている関数またはクラスも自動的に検索対象となります。

toplevelは予約語ではないので、同名の変数を定義した場合toplevelクラスオブジェクトは得られなくなります。